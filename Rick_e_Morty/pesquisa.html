<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pagina de Pesquisa</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-LN+7fdVzj6u52u30Kp6M/trliBMCMKTyK833zpbD+pXdCLuTusPj697FH4R/5mcr" crossorigin="anonymous">

    <link rel="stylesheet" href="./css/style.css">
</head>

<body>
    <section class="pag_2 ">
        <h5 class="titulo_pesquisar">Pesquisar Personagem</h5>
        <div class="cabecalho_invisivel">
            <a class="botoes_header_2 " href="./index.html">Cards</a>
            <a class="botoes_header_2 " href="./pesquisa.html">Pesquisar</a>
        </div>
        <div id="container-pesquisa" class="container col-sm-10">
            <input type="text" class="input_campo form-control" id="buscar">
            <button class="botao_buscar btn btn-primary me-md-2" id="botao_pesquisa" type="button"
                onclick="javascript:listarPersonagem()">buscar</button>
        </div>
    </section>

    <script>
        const buscar = document.getElementById('buscar')
        const botao_pesquisa = document.getElementById('botao_pesquisa')
        const container_pesquisa = document.getElementById('container-pesquisa')

        function buscar_personagem(id) {
            return fetch("https://rickandmortyapi.com/api/character/" + id)
                .then(function (resposta) {
                    return resposta.json()
                })
        }

        async function listarPersonagem() {
            const valor_input = buscar.value
            const personagemAtual = await buscar_personagem(valor_input)
            let nome = personagemAtual.name
            let idPersonagem = personagemAtual.id
            let imagemPersonagem = personagemAtual.image

            console.log(idPersonagem, nome, imagemPersonagem)

            const coluna = document.createElement('div')
            coluna.className = 'col d-flex -justify-content-center'

            coluna.innerHTML = `
                    <div class="card shadow-sm .card_personagens">
                        <h5 class="cabecalho_cards text-center">${nome}</h5>
                        <div class="card-body h-100 text-center">
                            <img src="${imagemPersonagem}" alt="${nome}" class="pokemon-img mb-2 img-fluid">
                            
                            <p class="id_cards card-text text-muted">#${idPersonagem}</p>
                        </div>
                    </div>
                `
            container_pesquisa.appendChild(coluna)

        }

    </script>
</body>

</html>